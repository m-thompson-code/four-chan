<div *ngIf="initalized && (selectedBoards.length || showBoards)" [class]="'top-nav' + (showBoards ? ' boards-showing' : '')">
    <div [class]="'top-nav-links' + (!selectedBoards.length ? ' no-board-selected' : '')">
        <div *ngIf="showBoards && showCloseBoardsFlash" [class]="'close-boards-flash' + (selectedBoards.length ? ' active' : '')"></div>

        <moo-button [hasBackground]="true" (click)="closeAllThreads()" icon="hourglass_full">Snooze all</moo-button>
        <moo-button [hasBackground]="true" (click)="clearThreadsAbove()" icon="hourglass_top">Snooze above</moo-button>
        <!-- <a (click)="clearBlocks()">Clear blocks</a> -->
        <moo-button [hasBackground]="true" class="boards-toggle" (click)="showBoards = !showBoards; showCloseBoardsFlash = false" [icon]="showBoards ? 'expand_less' : 'expand_more'">{{ showBoards ? 'Close settings' : 'Settings' }}</moo-button>
    </div>

    <div *ngIf="showBoards" class="boards">
        <div [class]="'setting' + (!selectedBoards.length ? ' no-board-selected' : '')">
            <div class="setting-text">Show floating fav buttons (will help with performance if off)</div>
            <moo-button [hasBackground]="favButtonService.showFavButtons" (click)="setShowFavButtons(!favButtonService.showFavButtons)">{{ favButtonService.showFavButtons ? 'On' : 'Off' }}</moo-button>
        </div>

        <div [class]="'setting' + (!selectedBoards.length ? ' no-board-selected' : '')">
            <div class="setting-text">Pages to monitor</div>
            <moo-button *ngFor="let num of [1,2,3,4,5,6,7,8,9,10]" [hasBackground]="num === pagesToLoad" (click)="setPagesToLoad(num)">{{ num }}</moo-button>
        </div>

        <div class="board-text">
            Select one or more boards. Close boards once you're done
        </div>

        <div class="board-buttons">
            <moo-button [hasBackground]="!!selectedBoardMap[board]" *ngFor="let board of boards" [class]="selectedBoardMap[board] ? 'selected' : ''" (click)="toggleBoard(board)">{{ board }}</moo-button>
        </div>
    </div>
</div>

<ng-container *ngIf="initalized && !selectedBoards.length">
    <div class="welcome-block" *ngIf="!agreeToTerms">
        <div class="agreement">
            <div class="logo">
                <div>4</div><div>4</div>
            </div>
            <br>
            <div>
                By accessing content from this application, you agree to the Disclaimer below. The following modified text is from <a href="https://4chan.org" target="_blank">4chan.org</a> to include all boards of <a href="https://4chan.org" target="_blank">4chan.org</a> (the "website") and this application.
            </div>
            <br>
            <div>
                Disclaimer: 
            </div>
            <br>
            <div>
                To access any board of <a href="https://4chan.org" target="_blank">4chan.org</a> (the "website") and this application, you understand and agree to the following:
            </div>
            <br>
            <div>
                1. The content of this website is for mature audiences only and may not be suitable for minors. If you are a minor or it is illegal for you to access mature images and language, do not proceed.
            </div>
            <br>
            <div>
                2. This website is presented to you AS IS, with no warranty, express or implied. By clicking "I Agree," you agree not to hold <a href="https://4chan.org" target="_blank">4chan.org</a> or this application responsible for any damages from your use of <a href="https://4chan.org" target="_blank">4chan.org</a> or this application, and you understand that the content posted is not owned or generated by <a href="https://4chan.org" target="_blank">4chan</a>  or this application, but rather by 4chan's users.
            </div>
            <br>
            <div>
                3. As a condition of using <a href="https://4chan.org" target="_blank">4chan.org</a> (the "website") or this application, you agree to comply with the "<a href="https://4chan.org/rules" target="_blank">Rules</a>" of <a href="https://4chan.org" target="_blank">4chan.org</a>, which are also linked on the home page of <a href="https://4chan.org" target="_blank">4chan.org</a>. Please read the Rules carefully, because they are important.
            </div>
        </div>
    
        <div class="buttons">
            <moo-button [hasBackground]="true" (click)="agreeToTermsFunc()" icon="done">I Agree</moo-button>
        </div>
    </div>
    
    <div class="welcome-block" *ngIf="agreeToTerms">
        <div>
            <div class="logo">
                <div>4</div><div>4</div>
            </div>
            <br>
            <div>
                This open source <a href="https://github.com/m-thompson-code/four-chan" target="blank">application</a> that allows you to lurk with a more modern UI that delivers auto updating content from all the boards you wanted at the same time in an almost endless feed.
            </div>
            <br>
            <div>
                By accessing content from this app, you agree to <a href="https://4chan.org" target="_blank">4chan.org</a>'s Disclaimer. If you'd like to view their disclaimer, please  visit <a href="https://4chan.org" target="_blank">4chan.org</a> and try to access any of their boards.
            </div>
            <br>
            <div>
                When scrolling through threads, you can 'Snooze' them so they will close and show up again in your feed once they have new posts. If you don't want to see a thread ever again, 'Delete' them so they won't show up in your feed again.
            </div>
            <br>
            <div>
                You may donate <a href="https://paypal.me/mthompsoncode" target="_blank">here</a>. For any questions or concerns please submit an issue on this project's <a href="https://github.com/m-thompson-code/four-chan" target="blank">github</a>.
            </div>
        </div>
        <div class="buttons">
            <moo-button [hasBackground]="true" (click)="showBoards = !showBoards" icon="done">Get started</moo-button>
        </div>
    </div>
</ng-container>


<div class="threads" *ngIf="agreeToTerms && initalized && selectedBoards.length">
    <ng-container *ngFor="let thread of threads">
        <div class="thread-header">
            <a class="board-link" [href]="'https://boards.4channel.org/' + thread.board + '/'" *ngIf="selectedBoards.length > 1">/{{ thread.board }}/</a>
            <moo-button [hasBackground]="true" (click)="blockThread(thread)" icon="delete_forever">Delete</moo-button>
            <moo-button [hasBackground]="true" (click)="closeThread(thread)" icon="watch_later">Snooze</moo-button>
            <moo-button class="expander" [hasBackground]="true" (click)="loadFullPosts(thread)" [icon]="thread.expanded ? 'refresh' : 'expand_more'">{{ thread.expanded ? 'Reload' : 'Expand' }}</moo-button>
            <!-- <a *ngIf=" thread.mainPosts[0]?.no" [href]="'https://boards.4chan.org/' + thread.board + '/thread/' + thread.mainPosts[0].no + '#p' + thread.mainPosts[0].no" target="_blank">4chan.org</a> -->
        </div>
    
        <moo-thread [thread]="thread" [showButtons]="threadInView === thread"
            (deleteSelected)="blockThread(thread)"
            (snoozeSelected)="closeThread(thread)"
            (loadMoreSelected)="loadFullPosts(thread)"
            (closeSelected)="deletePost(thread, $event)">
        </moo-thread>
    
        <div class="line-break"></div>
    </ng-container>
</div>

<div *ngIf="loaderService.loaderCount > 0" class="loader">
    LOADING . . .
</div>

<div *ngIf="errorCount" class="warning">
    <i class="material-icons">warning</i>
</div>
